---
title: 相机成像与ISP
description: 介绍了相机的成像原理以及简单的ISP流程和算法
slug: camera-isp
date: 2024-11-11T10:35:55.591Z
image: raw_image.png
categories:
    - 视觉传感器
tags:
    - ISP
    - 传感器
draft: false
---

# 相机成像与ISP

## 相机成像

### CCD vs CMOS
- CCD：全称Charge Coupled Device，即电荷耦合器件
- CMOS：全称Complementary Metal Oxide Semiconductor，即互补金属氧化物半导体

这两种传感器都由多个光电二极管组成的阵列，每个光电二极管的作用是将接收到的光信号转化为电荷。两者的基本工作原理相似，传感器接收光信号并通过一定时间的电荷积累实现曝光，进而获得每个像素的光强度数据。最后，这些电荷经模数转换被转换为电压并经过放大处理，最终生成原始的RAW图像数据。

在具体的实现方式上，两者有一定的区别：
- CCD：每个像素点的电荷会被传输到一个单独的输出节点，通过这一节点将电荷转化为电压信号，即一行行读出。这种方式有助于实现较低的噪声和较高的图像质量，但由于传输过程中需要大量的电子元件和复杂的电路设计，CCD传感器的功耗较高，且读出速度较慢。
- CMOS：每个像素点都具有一个独立的放大器，能够在传感器内直接将电荷转化为电压信号并进行放大处理。这种方式使得每个像素的电荷转换过程相对独立，能更快速地读取图像数据，降低功耗，但在低光照环境下可能会产生较多噪声。

![图1 CDDvsCMOS工作原理](CCD_vs_CMOS.gif)


总的来看，CMOS传感器相比于CCD传感器，工艺简单、成本更低，随着CMOS技术的不断进步，尤其是在降低噪声、提高低光照性能和增强图像质量方面的提升，CMOS传感器已经逐渐取代了传统的CCD传感器，成为主流选择。当今CCD传感器的应用主要局限于一些对图像质量要求极高的专业领域。

### Bayer阵列与彩色图像
1.1节中提到，sensor通过将光强信号转化为电压信号，从而得到了RAW图像，因此，如果不加任何处理，得到的raw图将是只有亮度的黑白图像。

为了合成彩色图像，则需要得到每一个像素点处的RGB三通道的亮度值。而要实现这一点，可以在每个光电二极管前加上只允许红/绿/蓝色光通过的滤光片，以获取该点处对应通道的亮度值。于是，每个像素点可以是由四个光电二极管组成的局部阵列，四个二极管分别按R、G、G、B排列，这个排列方式又称Bayer阵列（Bayer Pattern），于1974由柯达的工程师Bayer提出。

![图2 Bayer阵列](bayer_pattern.jpg)

![图3 RAW图像](raw_image.png)
